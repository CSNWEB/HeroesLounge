 

{% if __SELF__.playoff is null%}
    We could not find a tournament with this title!
{% else %}
    <h2>{{__SELF__.playoff.longTitle}}</h2>

    <div class="col-md-12">
        <nav class="navbar navbar-expand-lg navbar-light">
            <a class="navbar-brand">Stage</a>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#playoff_navigation"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                                </button>
            <div class="collapse navbar-collapse" id="playoff_navigation">
                <ul class="nav nav-tabs mr-auto">
                    {% for division in __SELF__.playoff.divisions %}
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#{{division.slug}}">
                            {{division.title}}
                        </a>
                    </li>
                    {% endfor %}
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="tab" href="#knockout">
                            Knockout Stage
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="tab-content">
            {% for division in __SELF__.playoff.divisions %}
            <div class="tab-pane" id="{{division.slug}}" role="tabpanel">
                {% partial '@divisionView' div=division %}
            </div>
            {% endfor %}
        

    <div class="tab-pane active" id="knockout" role="tabpanel">
    <div id="double_elim" style="overflow-x: auto; user-select: none;">
        <div class="grid-flex spacing-large">
            <div class="grid-flex-cell">
                <div>
                    <div>
                        <div class="bracket format-standard" style="width: {{__SELF__.total_width}}rem; height: {{__SELF__.total_height}}rem;">
    <div class="bracket-nodes">
    {% for match in __SELF__.matches %}
        <div style="position: absolute; left: {{match['offset_left']}}rem; top: {{match['offset_top']}}rem; width: {{__SELF__.match_width}}rem; height: {{__SELF__.match_height}}rem;"><a href="{{ 'match/view' | page({id: match['model'].id})}}">
            <div class="match format-mini hover">
                <div class="header" style="display: none;"></div>
                <div class="record">
                    <div class="opponent opponent-1">
                        {%if match['model'].teams[0] %}
                        {%if match['model'].teams[0].logo is not null%}<div class="logo"><img src="{{match['model'].teams[0].logo.path | resize(64,64)}}" style="position: relative; padding-top:0px;"title="{{match['model'].teams[0].title}}"></div>{%endif%}
                        <div class="name">{{match['model'].teams[0].title}}</div>
                        {%else%}
                        <div class="name disabled">TBD</div>
                        {%endif%}
                        {% if match['model'].is_played %}
                            {% if match['model'].winner.id == match['model'].teams[0].id %}
                                <div class="result win">{{match['model'].teams[0].pivot.team_score}}</div>
                            {% else %}
                                <div class="result loss">{{match['model'].teams[0].pivot.team_score}}</div>
                            {% endif %}
                        {% endif %}
                    </div>
                    <div class="opponent opponent-2">
                        {%if match['model'].teams[1] %}
                        {%if match['model'].teams[1].logo is not null%}<div class="logo"><img src="{{match['model'].teams[1].logo.path | resize(64,64)}}" title="{{match['model'].teams[1].title}}"></div>{%endif%}
                        <div class="name">{{match['model'].teams[1].title}}</div>{%else%}<div class="name disabled">TBD</div>
                        {%endif%}
                        {% if match['model'].is_played %}
                            {% if match['model'].winner.id == match['model'].teams[1].id %}
                                <div class="result win">{{match['model'].teams[1].pivot.team_score}}</div>
                            {% else %}
                                <div class="result loss">{{match['model'].teams[1].pivot.team_score}}</div>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
                {% if not match['model'].is_played %}
                <div class="state">
                    <time datetime="{{match['model'].wbp | date('m/d/Y')}}" dateformat="custom_medium" timeformat="none">{{match['model'].wbp | date('d M')}}</time>
                    <div class="time"><time datetime="{{match['model'].wbp | date('m/d/Y')}}" dateformat="none" timeformat="short">{{match['model'].wbp | date('H:i')}}</time></div>
                </div>
                {% endif %}
            </div>
        </a></div>
    {% endfor %}
    </div>
    <svg class="bracket-links" x="0" y="0" viewBox="0 0 {{__SELF__.total_width*1000}} {{__SELF__.total_height*1000}}">
        {% for line in __SELF__.polylines %}
        <polyline class="link" points="{%for point in line %}{{point}}{%if not loop.last%} {%endif%}{%endfor%}" fill="none" style="stroke-width: 62.5;"></polyline>
        {% endfor %}
    </svg>
    </div></div></div></div></div></div>

        </div>
    </div>
{% endif %}
